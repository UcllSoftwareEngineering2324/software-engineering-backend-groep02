-- H2 2.2.224;
;             
CREATE USER IF NOT EXISTS "TEST" SALT 'b9f11695cfdbf4cf' HASH '851c5c26068e5aab436b91907b4776b5a6b6fd007e98e4a1f68163c0fd8ae57b' ADMIN;       
CREATE SEQUENCE "PUBLIC"."CAR_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;              
CREATE SEQUENCE "PUBLIC"."GREETINGS_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;        
CREATE SEQUENCE "PUBLIC"."NOTIFICATION_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;     
CREATE SEQUENCE "PUBLIC"."RENTAL_SEQ" START WITH 1 INCREMENT BY 50;           
CREATE SEQUENCE "PUBLIC"."RENT_SEQ" START WITH 1 RESTART WITH 101 INCREMENT BY 50;            
CREATE CACHED TABLE "PUBLIC"."CAR"(
    "FOLDING_REAR_SEAT" BOOLEAN NOT NULL,
    "NUMBER_OF_CHILD_SEATS" SMALLINT NOT NULL,
    "NUMBER_OF_SEATS" SMALLINT NOT NULL,
    "TOW_BAR" BOOLEAN NOT NULL,
    "ID" BIGINT NOT NULL,
    "BRAND" CHARACTER VARYING(255),
    "LICENSE_PLATE" CHARACTER VARYING(255),
    "MODEL" CHARACTER VARYING(255),
    "TYPE" CHARACTER VARYING(255)
);            
ALTER TABLE "PUBLIC"."CAR" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");          
-- 10 +/- SELECT COUNT(*) FROM PUBLIC.CAR;    
INSERT INTO "PUBLIC"."CAR" VALUES
(TRUE, 2, 5, FALSE, 1, 'Toyota', '1-ABC-123', 'Corolla', 'Sedan'),
(TRUE, 1, 6, TRUE, 2, 'Ford', '1-DEF-456', 'F-150', 'Pickup'),
(FALSE, 2, 5, FALSE, 3, 'Honda', '1-GHI-789', 'Civic', 'Sedan'),
(TRUE, 2, 8, TRUE, 4, 'Chevrolet', '1-JKL-012', 'Suburban', 'SUV'),
(FALSE, 2, 5, FALSE, 5, 'Tesla', '1-MNO-345', 'Model 3', 'Sedan'),
(TRUE, 3, 7, FALSE, 6, 'BMW', '2-ABC-234', '320i', 'Sedan'),
(FALSE, 2, 5, TRUE, 7, 'Audi', '2-DEF-567', 'A4', 'Sedan'),
(TRUE, 4, 9, FALSE, 8, 'Mercedes', '2-GHI-890', 'GLE', 'SUV'),
(FALSE, 2, 6, FALSE, 9, 'Volkswagen', '2-JKL-345', 'Golf', 'Hatchback'),
(TRUE, 2, 5, TRUE, 10, 'Nissan', '2-MNO-678', 'Altima', 'Sedan');      
CREATE CACHED TABLE "PUBLIC"."GREETINGS"(
    "ID" BIGINT NOT NULL,
    "TEXT" CHARACTER VARYING(255)
);   
ALTER TABLE "PUBLIC"."GREETINGS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");    
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.GREETINGS;               
INSERT INTO "PUBLIC"."GREETINGS" VALUES
(1, 'Hello world!'); 
CREATE CACHED TABLE "PUBLIC"."NOTIFICATION"(
    "OWNER_VIEWED" BOOLEAN NOT NULL,
    "RECEIVER_VIEWED" BOOLEAN NOT NULL,
    "ID" BIGINT NOT NULL,
    "RENT_ID" BIGINT
);              
ALTER TABLE "PUBLIC"."NOTIFICATION" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_AD" PRIMARY KEY("ID");
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.NOTIFICATION;            
INSERT INTO "PUBLIC"."NOTIFICATION" VALUES
(FALSE, FALSE, 1, 1),
(TRUE, FALSE, 2, 2),
(FALSE, FALSE, 3, 3);
CREATE CACHED TABLE "PUBLIC"."RENT"(
    "BIRTH_DATE" DATE NOT NULL,
    "END_DATE" DATE NOT NULL,
    "START_DATE" DATE NOT NULL,
    "STATUS" TINYINT,
    "ID" BIGINT NOT NULL,
    "RENTAL_ID" BIGINT,
    "EMAIL" CHARACTER VARYING(255),
    "LICENSE_NUMBER" CHARACTER VARYING(255),
    "NATIONAL_REGISTER_NUMBER" CHARACTER VARYING(255),
    "PHONE_NUMBER" CHARACTER VARYING(255)
);    
ALTER TABLE "PUBLIC"."RENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_265" PRIMARY KEY("ID");       
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.RENT;    
INSERT INTO "PUBLIC"."RENT" VALUES
(DATE '2001-06-01', DATE '2024-04-07', DATE '2024-04-01', 1, 1, 1, 'renter1@email.com', '0123456789', '11.11.11-111.11', '0465544532'),
(DATE '1999-01-21', DATE '2024-04-26', DATE '2024-04-15', 2, 2, 2, 'renter2@example.com', '9876543210', '22.22.22-222.22', '0497754654'),
(DATE '1988-02-19', DATE '2024-05-31', DATE '2024-04-24', 0, 3, 3, 'renter3@outlook.com', '0000000000', '33.33.33-333.33', '0454429856'),
(DATE '2024-03-11', DATE '2024-06-15', DATE '2024-06-01', 1, 4, 4, 'matbob@yopmail.com', '0123456189', '23.03.07-123.45', '0514');         
CREATE CACHED TABLE "PUBLIC"."RENTAL"(
    "END_DATE" DATE NOT NULL,
    "POSTAL" INTEGER NOT NULL,
    "START_DATE" DATE NOT NULL,
    "STREET_NUMBER" INTEGER NOT NULL,
    "CAR_ID" BIGINT,
    "ID" BIGINT NOT NULL,
    "CITY" CHARACTER VARYING(255),
    "EMAIL" CHARACTER VARYING(255),
    "PHONE_NUMBER" CHARACTER VARYING(255),
    "STREET" CHARACTER VARYING(255),
    "BASE_PRICE" FLOAT NOT NULL,
    "PRICE_PER_KM" FLOAT NOT NULL,
    "FUEL_PENALTY_PRICE" FLOAT NOT NULL,
    "PRICE_PER_DAY" FLOAT NOT NULL
);  
ALTER TABLE "PUBLIC"."RENTAL" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" PRIMARY KEY("ID");       
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.RENTAL;  
INSERT INTO "PUBLIC"."RENTAL" VALUES
(DATE '2024-04-07', 0, DATE '2024-04-01', 0, 1, 1, 'New York', 'nyrental@example.com', '123-456-7890', NULL, 20.00, 4.00, 3.00, 2.00),
(DATE '2024-04-26', 0, DATE '2024-04-15', 0, 2, 2, 'Los Angeles', 'larental@example.com', '987-654-3210', NULL, 20.00, 4.00, 3.00, 2.00),
(DATE '2024-05-31', 0, DATE '2024-04-24', 0, 3, 3, 'Chicago', 'chirental@example.com', '555-123-4567', NULL, 20.00, 4.00, 3.00, 2.00),
(DATE '2024-06-15', 0, DATE '2024-06-01', 0, 4, 4, 'Houston', 'hourental@example.com', '321-654-9870', NULL, 20.00, 4.00, 3.00, 2.00),
(DATE '2024-07-20', 0, DATE '2024-07-05', 0, 5, 5, 'Miami', 'miamirental@example.com', '456-789-1234', NULL, 20.00, 4.00, 3.00, 2.00);            
ALTER TABLE "PUBLIC"."RENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_26" CHECK("STATUS" BETWEEN 0 AND 2) NOCHECK;  
ALTER TABLE "PUBLIC"."NOTIFICATION" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_A" UNIQUE("RENT_ID"); 
ALTER TABLE "PUBLIC"."NOTIFICATION" ADD CONSTRAINT "PUBLIC"."FK1CBO9X2C6PLFV7P92AIA6HF1A" FOREIGN KEY("RENT_ID") REFERENCES "PUBLIC"."RENT"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."RENT" ADD CONSTRAINT "PUBLIC"."FK31VP9EUVKRP2CWGBMB7S46JLV" FOREIGN KEY("RENTAL_ID") REFERENCES "PUBLIC"."RENTAL"("ID") NOCHECK;        
ALTER TABLE "PUBLIC"."RENTAL" ADD CONSTRAINT "PUBLIC"."FKQOQ449D7F5X3A9AS634TJ4L4B" FOREIGN KEY("CAR_ID") REFERENCES "PUBLIC"."CAR"("ID") NOCHECK;            
